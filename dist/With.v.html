<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>With.v</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
</head>
<body>
<pre class="coq"><code>From Coq             Require Import List.
From MetaCoq.Common  Require Import BasicAst Kernames Universes.
From MetaCoq.Utils   Require Import bytestring.
From MetaCoq.Erasure Require Import EAst.
From Agda2Lambox     Require Import CheckWF Eval.
Import ListNotations.

Definition env : global_declarations :=
  [((MPfile [&quot;With&quot;%bs], &quot;ys&quot;%bs),
    ConstantDecl
      {| cst_body :=
           Some
             (tApp
                (tApp
                   (tApp (tConst (MPfile [&quot;With&quot;%bs], &quot;filter&quot;%bs)) tBox)
                   (tLambda nAnon (tRel 0)))
                (tConst (MPfile [&quot;With&quot;%bs], &quot;xs&quot;%bs))) |});
   ((MPfile [&quot;With&quot;%bs], &quot;xs&quot;%bs),
    ConstantDecl
      {| cst_body :=
           Some
             (tConstruct
                {| inductive_mind := (MPfile [&quot;With&quot;%bs], &quot;List&quot;%bs);
                   inductive_ind := 0 |}
                1
                [tConstruct
                   {| inductive_mind := (MPfile [&quot;With&quot;%bs], &quot;Bool&quot;%bs);
                      inductive_ind := 0 |}
                   0 [];
                 tConstruct
                   {| inductive_mind := (MPfile [&quot;With&quot;%bs], &quot;List&quot;%bs);
                      inductive_ind := 0 |}
                   1
                   [tConstruct
                      {| inductive_mind := (MPfile [&quot;With&quot;%bs], &quot;Bool&quot;%bs);
                         inductive_ind := 0 |}
                      1 [];
                    tConstruct
                      {| inductive_mind := (MPfile [&quot;With&quot;%bs], &quot;List&quot;%bs);
                         inductive_ind := 0 |}
                      1
                      [tConstruct
                         {| inductive_mind := (MPfile [&quot;With&quot;%bs], &quot;Bool&quot;%bs);
                            inductive_ind := 0 |}
                         0 [];
                       tConstruct
                         {| inductive_mind := (MPfile [&quot;With&quot;%bs], &quot;List&quot;%bs);
                            inductive_ind := 0 |}
                         0 []]]]) |});
   ((MPfile [&quot;With&quot;%bs], &quot;filter&quot;%bs),
    ConstantDecl
      {| cst_body :=
           Some
             (tFix
                [{| dname := nNamed &quot;filter&quot;%bs;
                    dbody :=
                      tLambda
                        nAnon
                        (tLambda
                           nAnon
                           (tLambda
                              nAnon
                              (tCase
                                 ({| inductive_mind := (MPfile [&quot;With&quot;%bs], &quot;List&quot;%bs);
                                     inductive_ind := 0 |},
                                  0)
                                 (tRel 0)
                                 [([],
                                   tConstruct
                                     {| inductive_mind := (MPfile [&quot;With&quot;%bs], &quot;List&quot;%bs);
                                        inductive_ind := 0 |}
                                     0 []);
                                  ([nAnon; nAnon],
                                   tApp
                                     (tApp
                                        (tApp
                                           (tApp
                                              (tApp
                                                 (tLambda
                                                    nAnon
                                                    (tLambda
                                                       nAnon
                                                       (tLambda
                                                          nAnon
                                                          (tLambda
                                                             nAnon
                                                             (tLambda
                                                                nAnon
                                                                (tCase
                                                                   ({| inductive_mind :=
                                                                         (MPfile [&quot;With&quot;%bs],
                                                                          &quot;Bool&quot;%bs);
                                                                       inductive_ind := 0 |},
                                                                    0)
                                                                   (tRel 1)
                                                                   [([],
                                                                     tApp
                                                                       (tApp
                                                                          (tApp (tRel 10) tBox)
                                                                          (tRel 3))
                                                                       (tRel 0));
                                                                    ([],
                                                                     tConstruct
                                                                       {| inductive_mind :=
                                                                            (MPfile [&quot;With&quot;%bs],
                                                                             &quot;List&quot;%bs);
                                                                          inductive_ind := 0 |}
                                                                       1
                                                                       [tRel 2;
                                                                        tApp
                                                                          (tApp
                                                                             (tApp (tRel 10) tBox)
                                                                             (tRel 3))
                                                                          (tRel 0)])]))))))
                                                 (tRel 4))
                                              (tRel 3))
                                           (tRel 1))
                                        (tApp (tRel 3) (tRel 1)))
                                     (tRel 0))])));
                    rarg := 0 |}]
                0) |});
   ((MPfile [&quot;With&quot;%bs], &quot;List&quot;%bs),
    InductiveDecl
      {| ind_finite := Finite; ind_npars := 0;
         ind_bodies :=
           [{| ind_name := &quot;List&quot;%bs; ind_propositional := false;
               ind_kelim := IntoAny;
               ind_ctors :=
                 [{| cstr_name := &quot;y91yy93y&quot;%bs; cstr_nargs := 0 |};
                  {| cstr_name := &quot;_y58yy58y_&quot;%bs; cstr_nargs := 2 |}];
               ind_projs := [] |}] |});
   ((MPfile [&quot;With&quot;%bs], &quot;Bool&quot;%bs),
    InductiveDecl
      {| ind_finite := Finite; ind_npars := 0;
         ind_bodies :=
           [{| ind_name := &quot;Bool&quot;%bs; ind_propositional := false;
               ind_kelim := IntoAny;
               ind_ctors :=
                 [{| cstr_name := &quot;r#false&quot;%bs; cstr_nargs := 0 |};
                  {| cstr_name := &quot;r#true&quot;%bs; cstr_nargs := 0 |}];
               ind_projs := [] |}] |});
   ((MPfile [&quot;LamBox&quot;%bs], &quot;Empty&quot;%bs),
    InductiveDecl
      {| ind_finite := Finite; ind_npars := 0;
         ind_bodies :=
           [{| ind_name := &quot;Empty&quot;%bs; ind_propositional := false;
               ind_kelim := IntoAny; ind_ctors := []; ind_projs := [] |}] |})].

Compute @check_wf_glob eflags env.

Definition prog1 : program :=
  (env, tConst (MPfile [&quot;With&quot;%bs], &quot;ys&quot;%bs)).

Compute eval_program prog1.</code></pre>
</body>
</html>
